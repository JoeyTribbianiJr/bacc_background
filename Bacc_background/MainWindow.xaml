<Window x:Class="Bacc_background.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
		xmlns:s="clr-namespace:System;assembly=mscorlib"
		mc:Ignorable="d"
        Title="MainWindow" Height="788" Width="1044" >
	<Window.Resources>

		<ResourceDictionary>
			<ResourceDictionary.MergedDictionaries>
				<ResourceDictionary Source="Style.xaml" />
			</ResourceDictionary.MergedDictionaries>
			<Style TargetType="Button" BasedOn="{StaticResource GoodButton}">
				<Setter Property="MaxHeight" Value="22"></Setter>
			</Style>
			<DataTemplate x:Key="listBoxTemplateInt">
				<StackPanel Margin="4">
					<DockPanel>
						<ComboBox ItemsSource="{Binding Value.Values}" Width="120"
							  SelectedIndex="{Binding Value.SelectedIndex,Mode=TwoWay}" 
							  ></ComboBox>
					</DockPanel>
				</StackPanel>
			</DataTemplate>
			<Style x:Key="AnimatedButtonStyle" TargetType="{x:Type Button}">
				<Setter Property="Template">
					<Setter.Value>
						<ControlTemplate TargetType="{x:Type Button}">
							<Grid>
								<Rectangle Name="outline" RadiusX="9" RadiusY="9" Stroke="Black"  
                                       Fill="{TemplateBinding Background}" StrokeThickness="1.6"></Rectangle>
								<ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center"/>
							</Grid>
							<ControlTemplate.Triggers>
								<Trigger Property="IsMouseOver" Value="True">
									<Trigger.EnterActions>
										<BeginStoryboard>
											<Storyboard>
												<DoubleAnimation Duration="0:0:0.3" AutoReverse="True" Storyboard.TargetProperty="(Rectangle.StrokeThickness)"  
                                                             Storyboard.TargetName="outline" By="1.2"/>
											</Storyboard>
										</BeginStoryboard>
									</Trigger.EnterActions>
								</Trigger>
							</ControlTemplate.Triggers>
						</ControlTemplate>
					</Setter.Value>
				</Setter>
			</Style>

			<x:Array Type="{x:Type s:String}" x:Key="src">
				<s:String>Foo</s:String>
				<s:String>Bar</s:String>
				<s:String>Spong</s:String>
				<s:String>One</s:String>
				<s:String>Two</s:String>
				<s:String>Three</s:String>
				<s:String>Four</s:String>
				<s:String>Five</s:String>
			</x:Array>


			
				


			<DataTemplate x:Key="frontTemplate">
				<GroupBox Header="Front" Background="White">
					<TextBlock FontSize="40" Foreground="Green" Text="{Binding}" />
				</GroupBox>
			</DataTemplate>
			<DataTemplate x:Key="backTemplate">
				<GroupBox Header="Back" Background="White">
					<StackPanel>
						<RadioButton Content="This" IsChecked="True" />
						<RadioButton Content="Is" />
						<RadioButton Content="The" />
						<RadioButton Content="Back" />
					</StackPanel>
				</GroupBox>
			</DataTemplate>

			<DataTemplate x:Key="flipItemTemplate">

				<!-- Note: Camera setup only works when this is square. -->
				<Grid Width="200" Height="200">

					<!-- Provides 3D rotation transition. Hidden except for when animation is
       active. -->
					<Viewport3D Grid.Column="0" x:Name="vp3D" Visibility="Hidden">
						<Viewport3D.Camera>
							<PerspectiveCamera x:Name="camera" Position="0,0,0.5" LookDirection="0,0,-1" FieldOfView="90" />
						</Viewport3D.Camera>

						<Viewport3D.Children>

							<ModelVisual3D>
								<ModelVisual3D.Content>
									<Model3DGroup>
										<DirectionalLight Color="#444" Direction="0,0,-1" />
										<AmbientLight Color="#BBB" />
									</Model3DGroup>
								</ModelVisual3D.Content>
							</ModelVisual3D>
							<ModelVisual3D>
								<ModelVisual3D.Content>
									<GeometryModel3D>


										<!-- Simple flat, square surface -->
										<GeometryModel3D.Geometry>
											<MeshGeometry3D TriangleIndices="0,1,2 2,3,0" TextureCoordinates="0,1 1,1 1,0 0,0" Positions="-0.5,-0.5,0 0.5,-0.5,0 0.5,0.5,0 -0.5,0.5,0" />
										</GeometryModel3D.Geometry>


										<!-- Front of shape shows the content of 'frontHost' -->
										<GeometryModel3D.Material>
											<DiffuseMaterial>
												<DiffuseMaterial.Brush>
													<VisualBrush Visual="{Binding ElementName=frontHost}" />
												</DiffuseMaterial.Brush>
											</DiffuseMaterial>
										</GeometryModel3D.Material>


										<!-- Back of shape shows the content of 'backHost' -->
										<GeometryModel3D.BackMaterial>
											<DiffuseMaterial>
												<DiffuseMaterial.Brush>
													<VisualBrush Visual="{Binding ElementName=backHost}">
														<VisualBrush.RelativeTransform>
															<!-- By default, this would come out backwards because we're on the
                                   back on the shape. Flip it to make it right. -->
															<ScaleTransform ScaleX="-1" CenterX="0.5" />
														</VisualBrush.RelativeTransform>
													</VisualBrush>
												</DiffuseMaterial.Brush>
											</DiffuseMaterial>
										</GeometryModel3D.BackMaterial>

										<!-- Rotation transform used for transition. -->
										<GeometryModel3D.Transform>
											<RotateTransform3D>
												<RotateTransform3D.Rotation>
													<AxisAngleRotation3D x:Name="rotate" Axis="0,3,0" Angle="0" />
												</RotateTransform3D.Rotation>
											</RotateTransform3D>
										</GeometryModel3D.Transform>
									</GeometryModel3D>
								</ModelVisual3D.Content>
							</ModelVisual3D>
						</Viewport3D.Children>

					</Viewport3D>

					<!-- We use a pair of nested Borders to wrap the content that's going to go on
       each side of the rotating model.
       The reason is that we need to be able to fade these real bits of UI in and out
       as we transition from front to back, but we need to make sure the VisualBrush
       in the 3D model doesn't also get faded out. So the VisualBrush uses the inner
       Border, while the fade is applied to the outer one.
  -->
					<Border x:Name="frontWrapper">
						<!-- Note, it's important that this element has visuals that completely fill the space, as
       otherwise it messes with the VisualBrush's size in the 3D model. Setting the background
       has that effect, even a transparent one. -->
						<Border x:Name="frontHost" Background="Transparent">
							<Border.Triggers>
								<EventTrigger RoutedEvent="Grid.MouseDown">
									<BeginStoryboard>
										<Storyboard>
											<!-- Make the Viewport3D visible only for the duration of the rotation. -->
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="vp3D" Storyboard.TargetProperty="Visibility">
												<DiscreteObjectKeyFrame KeyTime="0:0:0" Value="{x:Static Visibility.Visible}" />
												<DiscreteObjectKeyFrame KeyTime="0:0:1.1" Value="{x:Static Visibility.Hidden}" />
											</ObjectAnimationUsingKeyFrames>

											<!-- Make the background element visible. (It won't actually appear until it is
                 faded in right at the end of the animation.) -->
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="backWrapper" Storyboard.TargetProperty="Visibility">
												<DiscreteObjectKeyFrame KeyTime="0:0:1" Value="{x:Static Visibility.Visible}"/>
											</ObjectAnimationUsingKeyFrames>


											<!-- Hide the foreground element. It will already be invisible by this time
                 because we fade it out right at the start of the animation. However, until
                 we set its Visibility to Hidden, it will still be visible to the mouse -->
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="frontWrapper" Storyboard.TargetProperty="Visibility">
												<DiscreteObjectKeyFrame KeyTime="0:0:0.05" Value="{x:Static Visibility.Hidden}" />
											</ObjectAnimationUsingKeyFrames>


											<!-- Fade the front wrapper out. The Viewport3D is behind us, so it'll fade into
                 view at this point. The reason for fading is to avoid a visible step as we
                 switch from the real UI to the copy projected onto the 3D model. -->
											<DoubleAnimation To="0" Duration="0:0:0.05" Storyboard.TargetName="frontWrapper" Storyboard.TargetProperty="Opacity" />

											<!-- Fade the back wrapper in. Once the spin completes, we fade the real back UI
                 in over the Viewport3D - using a fade to avoid a sudden jolt between the
                 slightly fuzzy 3D look and the real UI. -->
											<DoubleAnimation BeginTime="0:0:1.05" Duration="0:0:0.05" To="1" Storyboard.TargetName="backWrapper" Storyboard.TargetProperty="Opacity" />

											<!-- 3D animation. Move the camera out slightly as we spin, so the model fits entirely
                 within the field of view. Rotate the model 180 degrees. -->
											<Point3DAnimation To="0,0,1.1" From="0,0,0.5" BeginTime="0:0:0.05" Duration="0:0:0.5" AutoReverse="True" DecelerationRatio="0.3"
                           Storyboard.TargetName="camera" Storyboard.TargetProperty="(PerspectiveCamera.Position)" />
											<DoubleAnimation From="0" To="180" AccelerationRatio="0.3" DecelerationRatio="0.3"
                           BeginTime="0:0:0.05" Duration="0:0:1" Storyboard.TargetName="rotate" Storyboard.TargetProperty="Angle" />
										</Storyboard>
									</BeginStoryboard>
								</EventTrigger>
							</Border.Triggers>
							<ContentPresenter  Content="{Binding}" ContentTemplate="{StaticResource frontTemplate}" />
						</Border>
					</Border>
					<Border x:Name="backWrapper" Grid.Column="0"  Visibility="Hidden" Opacity="0">
						<Border x:Name="backHost" Background="Transparent">
							<Border.Triggers>
								<EventTrigger RoutedEvent="Grid.MouseDown">
									<BeginStoryboard>
										<Storyboard>
											<ObjectAnimationUsingKeyFrames   Storyboard.TargetName="vp3D" Storyboard.TargetProperty="Visibility">
												<DiscreteObjectKeyFrame KeyTime="0:0:0" Value="{x:Static Visibility.Visible}" />
												<DiscreteObjectKeyFrame KeyTime="0:0:1.1" Value="{x:Static Visibility.Hidden}" />
											</ObjectAnimationUsingKeyFrames>

											<ObjectAnimationUsingKeyFrames  Storyboard.TargetName="frontWrapper" Storyboard.TargetProperty="Visibility">
												<DiscreteObjectKeyFrame KeyTime="0:0:1" Value="{x:Static Visibility.Visible}"/>
											</ObjectAnimationUsingKeyFrames>
											<ObjectAnimationUsingKeyFrames Storyboard.TargetName="backWrapper" Storyboard.TargetProperty="Visibility">
												<DiscreteObjectKeyFrame KeyTime="0:0:0.05" Value="{x:Static Visibility.Hidden}" />
											</ObjectAnimationUsingKeyFrames>

											<DoubleAnimation To="0" Duration="0:0:0.05" Storyboard.TargetName="backWrapper" Storyboard.TargetProperty="Opacity" />
											<DoubleAnimation BeginTime="0:0:1.05" Duration="0:0:0.05" Storyboard.TargetName="frontWrapper"  Storyboard.TargetProperty="Opacity" />

											<Point3DAnimation To="0,0,1.1" From="0,0,0.5" BeginTime="0:0:0.05" Duration="0:0:0.5" AutoReverse="True" DecelerationRatio="0.3"  Storyboard.TargetName="camera"
                           Storyboard.TargetProperty="(PerspectiveCamera.Position)" />
											<DoubleAnimation From="180" To="360" AccelerationRatio="0.3" DecelerationRatio="0.3"
                           BeginTime="0:0:0.05" Duration="0:0:1" Storyboard.TargetName="rotate" Storyboard.TargetProperty="Angle" />
										</Storyboard>
									</BeginStoryboard>
								</EventTrigger>
							</Border.Triggers>
							<ContentPresenter Content="{Binding}" ContentTemplate="{StaticResource backTemplate}" />
						</Border>
					</Border>


				</Grid>
			</DataTemplate>

		</ResourceDictionary>
	</Window.Resources>
	<Grid >
		<Grid.ColumnDefinitions>
			<ColumnDefinition Width="2*"></ColumnDefinition>
			<ColumnDefinition Width="1*"></ColumnDefinition>
		</Grid.ColumnDefinitions>
		<Grid.RowDefinitions>
			<RowDefinition Height="2*"></RowDefinition>
			<RowDefinition Height="1*"></RowDefinition>
		</Grid.RowDefinitions>
		<GroupBox Header="前台监控" Margin="10,0,0,0"
				  Grid.Column="0" Grid.Row="0">


			<StackPanel>
				
				<Ellipse Height="50" Width="100">
				<Ellipse.Fill>
					<SolidColorBrush x:Name="ellipseBrush" Color="SteelBlue"/>
				</Ellipse.Fill>
				<Ellipse.Triggers>
					<EventTrigger RoutedEvent="Ellipse.Loaded">
						<EventTrigger.Actions>
							<BeginStoryboard>
								<Storyboard Duration="00:00:06" RepeatBehavior="Forever">
									<DoubleAnimation Storyboard.TargetProperty="(Ellipse.Width)" 
                                                 Duration="0:0:3" AutoReverse="True" FillBehavior="Stop"
                                                 RepeatBehavior="Forever" AccelerationRatio="0.9" 
                                                 DecelerationRatio="0.1" From="100" To="300">
										<DoubleAnimation.EasingFunction>
											<BounceEase EasingMode="EaseInOut"/>
										</DoubleAnimation.EasingFunction>
									</DoubleAnimation>
									<ColorAnimation Storyboard.TargetName="ellipseBrush" Storyboard.TargetProperty="(SolidColorBrush.Color)"
                                                Duration="0:0:3" AutoReverse="True" FillBehavior="Stop"
                                                RepeatBehavior="Forever" From="Yellow" To="Red"/>
								</Storyboard>
							</BeginStoryboard>
						</EventTrigger.Actions>
					</EventTrigger>
				</Ellipse.Triggers>
			</Ellipse>
				<ScrollViewer>
					<ItemsControl ItemsSource="{StaticResource src}" ItemTemplate="{StaticResource flipItemTemplate}">
						<ItemsControl.ItemsPanel>
							<ItemsPanelTemplate>
								<WrapPanel />
							</ItemsPanelTemplate>
						</ItemsControl.ItemsPanel>

					</ItemsControl>
				</ScrollViewer>
			</StackPanel>
			<!--<Image Name="imgGame"
			   HorizontalAlignment="Stretch"
			   VerticalAlignment="Stretch"></Image>-->
		</GroupBox>
		<Grid Grid.Column="1" Grid.Row="0">
			<StackPanel HorizontalAlignment="Stretch"
						VerticalAlignment="Stretch">
				<GroupBox Header="密码设置" Margin="0,10,10,0">
					<StackPanel Orientation="Vertical" HorizontalAlignment="Left" Width="290">
						<StackPanel Margin="15,5,0,5" Orientation="Horizontal">
							<TextBlock Width="70" HorizontalAlignment="Left" > 开分员密码：</TextBlock>
							<TextBox Name="txtKaifen" Width="100"
									 IsEnabled="False">54321</TextBox>
						</StackPanel>
						<StackPanel Margin="15,5,0,5" Orientation="Horizontal">
							<TextBlock Width="70" HorizontalAlignment="Left" > 管理员密码：</TextBlock>
							<TextBox Name="txtAdmin" Width="100"
									 IsEnabled="False">55321</TextBox>
						</StackPanel>
						<StackPanel Margin="15,5,0,5" Orientation="Horizontal">
							<TextBlock Width="70" HorizontalAlignment="Left" > 总经理密码：</TextBlock>
							<TextBox Name="txtManager" Width="100"
									 IsEnabled="False">56321</TextBox>
						</StackPanel>
						<StackPanel Margin="15,30,0,5" Orientation="Horizontal">
							<TextBlock Width="70" HorizontalAlignment="Left" > 查账密码：</TextBlock>
							<TextBox Name="txtChazhang" Width="100"
									 IsEnabled="False">12345</TextBox>
						</StackPanel>
						<StackPanel Margin="15,5,0,5" Orientation="Horizontal">
							<TextBlock Width="70" HorizontalAlignment="Left" > 查押分密码：</TextBlock>
							<TextBox Name="txtChayafen" Width="100"
									 IsEnabled="False">54321</TextBox>
						</StackPanel>
						<StackPanel Margin="15,5,0,5" Orientation="Horizontal">
							<Button Name="btnModiPwd" Width="65" HorizontalAlignment="Left"
										HorizontalContentAlignment="Center" >修改密码</Button>
							<CheckBox Margin="15,0,0,0" 
										  Name="chkClosePwd" Width="100"
											VerticalContentAlignment="Center"
									 >关闭前台密码</CheckBox>
						</StackPanel>
					</StackPanel>
				</GroupBox>
				<GroupBox Header="参数设置" Margin="0,0,10,0">
					<ListBox Name="lstButton" Margin="0,5,0,10" 
								Width="300"
								ItemTemplate="{StaticResource listBoxTemplateInt}" >
						<ListBox.Template>
							<ControlTemplate TargetType="{x:Type ListBox}">
								<WrapPanel Width="300" Orientation="Horizontal" IsItemsHost="True"/>
							</ControlTemplate>
						</ListBox.Template>
					</ListBox>
				</GroupBox>
			</StackPanel>
		</Grid>
		<Grid Grid.Column="0" Grid.ColumnSpan="2"
						Grid.Row="1">
			<Grid>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="2*"></ColumnDefinition>
					<ColumnDefinition Width="2*"></ColumnDefinition>
					<ColumnDefinition Width="1*"></ColumnDefinition>
				</Grid.ColumnDefinitions>
				<GroupBox Header="前台管理" Grid.Column="0" Margin="10,0,0,0">
					<Grid>
						<Grid.ColumnDefinitions>
							<!--<ColumnDefinition Width="1*"></ColumnDefinition>-->
							<ColumnDefinition Width="5*"></ColumnDefinition>
							<ColumnDefinition Width="1*"></ColumnDefinition>
						</Grid.ColumnDefinitions>
						<Grid.RowDefinitions>
							<RowDefinition Height="1*"></RowDefinition>
							<RowDefinition Height="5*"></RowDefinition>
							<RowDefinition Height="1*"></RowDefinition>
						</Grid.RowDefinitions>
						<StackPanel Grid.ColumnSpan="3" Orientation="Horizontal" 
									Height="25">
							<Label >设置局数:</Label>
							<TextBox Name="txtRoundNum" Height="20" MinWidth="70"></TextBox>
							<Button  Click="btnCurBillwayClick" Margin="10,0,0,0">当前路单</Button>
							<Button  Name="btnPrintBillway" Click="btnPrintBillway_Click" 
									 Margin="85,0,0,0">打印路单</Button>
						</StackPanel>
						<Button  Name="btnTransmitBillway" 
								     Grid.Column="2" Grid.Row="0" HorizontalAlignment="Center"
									 Click="btnTransmitBillway_Click" >传送路单</Button>
						<StackPanel Orientation="Horizontal" Grid.Row="1">
							<Button Height="150" Name="btnRegenerateBillway"  Margin="10,0,0,0"
									Style="{StaticResource GreenButton}" 
									Click="btnRegenerateBillway_Click"
									Content="重&#x0a;新&#x0a;生&#x0a;成&#x0a;路&#x0a;单">
							</Button>
							<Grid  Name="BigWaybill" Margin="10,0,0,0"
								   Width="286" Height="156">
								<Grid.RowDefinitions>
									<RowDefinition />
									<RowDefinition />
									<RowDefinition />
									<RowDefinition />
									<RowDefinition />
									<RowDefinition />
								</Grid.RowDefinitions>
								<Grid.ColumnDefinitions>
									<ColumnDefinition />
									<ColumnDefinition />
									<ColumnDefinition />
									<ColumnDefinition />
									<ColumnDefinition />
									<ColumnDefinition />
									<ColumnDefinition />
									<ColumnDefinition />
									<ColumnDefinition />
									<ColumnDefinition />
									<ColumnDefinition />
								</Grid.ColumnDefinitions>
							</Grid>
						</StackPanel>

						<StackPanel Grid.Column="2" Grid.Row="1">
							<StackPanel.Resources>
								<Style TargetType="Button" BasedOn="{StaticResource GoodButton}">
									<Setter Property="Margin" Value="0,10,0,0"></Setter>
				<Setter Property="MinHeight" Value="22"></Setter>
								</Style>
							</StackPanel.Resources>
							<Button  Name="btnGeneralBillway" 
									 Margin="0,5,0,0"
									HorizontalAlignment="Center"
									 Click="btnGeneralBillway_Click">生成路单</Button>
							<Button  Name="btnImportBillway" 
									 HorizontalAlignment="Center"
									 Click="btnImportBillway_Click">导入路单</Button>
							<Button  Name="btnInsertBillway" 
									 HorizontalAlignment="Center"
									 Click="btnInsertBillway_Click">插入路单</Button>
							<Button  Name="btnReplcBillway" 
									 HorizontalAlignment="Center"
									 Click="btnReplcBillway_Click">替换路单</Button>
							<Button  Name="btnSaveBillway" 
									 HorizontalAlignment="Center"
									 Click="btnSaveBillway_Click">保存路单</Button>
						</StackPanel>

						<StackPanel Grid.Row="2" Grid.Column="0" 
									Orientation="Horizontal"
									Grid.ColumnSpan="3">
							<Button Name="Homepage" Click="Homepage_Click" Width="45">首页</Button>
							<Button Name="Prepage" Click="Prepage_Click" Width="45">上一页</Button>
							<Button Name="Jumpto" Click="Jumpto_Click" Width="45" Margin="10,0,3,0">跳到</Button>
							<TextBox Name="txtPageIndex" Width="35" Height="20"></TextBox>
							<TextBlock VerticalAlignment="Center" Margin="3,0,0,0">页</TextBlock>
							<Button Name="btnNextpage" Click="btnNextpage_Click" Width="45" Margin="5,0,0,0">下一页</Button>
							<Button Name="btnLastpage" Click="btnLastpage_Click" Width="45">尾页</Button>
							<Button Name="btnImportFrontWaybill" Click="btnImportFrontWaybill_Click" 
									Margin="10,0,0,0"
									Width="85"  >导入前台路单</Button>
						</StackPanel>
					</Grid>
				</GroupBox>

				<GroupBox Header="强力控制" Grid.Column="1">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="3*"></RowDefinition>
							<RowDefinition Height="4*"></RowDefinition>
						</Grid.RowDefinitions>
						<ListView Grid.Row="0" ></ListView>
						<Grid Grid.Row="1">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="240*"/>
								<ColumnDefinition Width="163*"/>
							</Grid.ColumnDefinitions>

						</Grid>
					</Grid>
				</GroupBox>

				<GroupBox Header="功能菜单" Grid.Column="2" Grid.Row="1">
					<Grid>
						<Grid.RowDefinitions>
							<RowDefinition Height="185*"/>
							<RowDefinition Height="46*"/>
						</Grid.RowDefinitions>
						<Grid Grid.Row="0" >
							<Grid.RowDefinitions>
								<RowDefinition Height="46*"/>
								<RowDefinition Height="139*"/>
							</Grid.RowDefinitions>
							<TextBox Name="txtPwd" Margin="20,10,20,10"></TextBox>
							<Grid Grid.Row="1" Margin="20,0,20,0">
								<Grid.RowDefinitions>
									<RowDefinition />
									<RowDefinition />
									<RowDefinition />
									<RowDefinition />
								</Grid.RowDefinitions>
								<Grid.ColumnDefinitions>
									<ColumnDefinition />
									<ColumnDefinition />
									<ColumnDefinition />
									<ColumnDefinition />
								</Grid.ColumnDefinitions>
							</Grid>
						</Grid>
						<Button Grid.Row="1" Margin="20,5,20,5"
								Name="btnDisconnect" Click="btnDisconnect_Click">断开连接</Button>
					</Grid>
				</GroupBox>
			</Grid>
		</Grid>
	</Grid>
</Window>
